<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="900" viewBox="0 0 1200 900">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto-start-reverse">
      <path d="M0,0 L10,5 L0,10 z" fill="#4a4a4a" />
    </marker>
    <style type="text/css"><![CDATA[
      .box { fill:#ffffff; stroke:#4a4a4a; stroke-width:2; rx:8; ry:8; }
      .title { font-family: Arial, Helvetica, sans-serif; font-size:18px; fill:#222222; font-weight:600; }
      .text { font-family: Arial, Helvetica, sans-serif; font-size:14px; fill:#222222; }
      .note { font-family: Arial, Helvetica, sans-serif; font-size:13px; fill:#444444; }
      .wire { stroke:#4a4a4a; stroke-width:2; fill:none; marker-end:url(#arrow); }
      .bus { stroke:#4a4a4a; stroke-width:3; fill:none; }
      .vlan { fill:#f7fbff; stroke:#4a4a4a; stroke-width:2; rx:8; ry:8; }
      .vlan-title { font-family: Arial, Helvetica, sans-serif; font-size:16px; fill:#222; font-weight:600; }
      .vlan-cidr { font-family: Arial, Helvetica, sans-serif; font-size:13px; fill:#222; }
    ]]></style>
  </defs>

  <!-- Internet -->
  <rect class="box" x="510" y="30" width="180" height="60"/>
  <text class="title" x="600" y="67" text-anchor="middle">Internet</text>

  <!-- Edge Firewall/Router -->
  <rect class="box" x="420" y="130" width="360" height="140"/>
  <text class="title" x="600" y="160" text-anchor="middle">Edge Firewall / Router</text>
  <text class="text" x="440" y="185">• pfSense / RouterOS</text>
  <text class="text" x="440" y="205">• DHCP + DNS (Unbound)</text>
  <text class="text" x="440" y="225">• pfBlockerNG / RPZ</text>
  <text class="text" x="440" y="245">• Syslog / NetFlow • Squid (optional)</text>

  <!-- HA & LAG notes -->
  <text class="note" x="800" y="155">CARP/VRRP for HA (optional)</text>
  <text class="note" x="250" y="155">LAG / Link Aggregation (optional)</text>

  <!-- to Switch wire -->
  <path class="wire" d="M600,270 L600,320"/>

  <!-- Managed L2 Switch -->
  <rect class="box" x="430" y="320" width="340" height="70"/>
  <text class="title" x="600" y="360" text-anchor="middle">Managed L2 Switch</text>
  <text class="note" x="600" y="382" text-anchor="middle">802.1Q VLAN tagging • VLAN‑aware SSID map</text>

  <!-- default inter-VLAN drop note -->
  <text class="note" x="770" y="330">Default inter‑VLAN: DROP</text>

  <!-- distribution bus under switch -->
  <path class="bus" d="M350,430 L850,430"/>
  <!-- vertical drops to VLANs -->
  <path class="wire" d="M450,390 L450,430"/>
  <path class="wire" d="M550,390 L550,430"/>
  <path class="wire" d="M650,390 L650,430"/>
  <path class="wire" d="M750,390 L750,430"/>
  <path class="wire" d="M850,390 L850,430"/>

  <!-- VLAN boxes row -->
  <rect class="vlan" x="370" y="450" width="160" height="120"/>
  <text class="vlan-title" x="450" y="475" text-anchor="middle">VLAN 10 (Servers)</text>
  <text class="vlan-cidr" x="450" y="495" text-anchor="middle">10.0.0.0/24</text>
  <text class="text" x="380" y="515">• File/App/DB</text>
  <text class="text" x="380" y="535">• FreeRADIUS</text>

  <rect class="vlan" x="530" y="450" width="160" height="120"/>
  <text class="vlan-title" x="610" y="475" text-anchor="middle">VLAN 110 (Dept A)</text>
  <text class="vlan-cidr" x="610" y="495" text-anchor="middle">10.10.0.0/24</text>
  <text class="text" x="540" y="515">• PCs / Printers / Laptops</text>

  <rect class="vlan" x="690" y="450" width="160" height="120"/>
  <text class="vlan-title" x="770" y="475" text-anchor="middle">VLAN 120 (Dept B)</text>
  <text class="vlan-cidr" x="770" y="495" text-anchor="middle">10.20.0.0/24</text>
  <text class="text" x="700" y="515">• PCs / Workstations / VoIP</text>

  <rect class="vlan" x="850" y="450" width="160" height="120"/>
  <text class="vlan-title" x="930" y="475" text-anchor="middle">VLAN 130 (Guests)</text>
  <text class="vlan-cidr" x="930" y="495" text-anchor="middle">10.30.0.0/24</text>
  <text class="text" x="860" y="515">• Guest Wi‑Fi (VLAN‑aware AP)</text>
  <text class="note" x="860" y="535">WAN only (BLOCK RFC1918)</text>

  <rect class="vlan" x="210" y="450" width="160" height="120"/>
  <text class="vlan-title" x="290" y="475" text-anchor="middle">VLAN 910 (Admin)</text>
  <text class="vlan-cidr" x="290" y="495" text-anchor="middle">192.168.10.0/24</text>
  <text class="text" x="220" y="515">• IT/Admin PCs • Backups</text>

  <!-- 802.1X/MAB and DHCP reservations notes -->
  <text class="note" x="210" y="610">802.1X/MAB authentication on access ports</text>
  <text class="note" x="210" y="630">DHCP reservations (IP↔MAC binding)</text>

  <!-- Pinhole examples -->
  <rect class="box" x="170" y="670" width="860" height="140"/>
  <text class="title" x="600" y="695" text-anchor="middle">Example Inter‑VLAN Policies (pinhole rules)</text>
  <text class="text" x="190" y="720">• Admin (192.168.10.0/24) → any: ALLOW</text>
  <text class="text" x="190" y="740">• DeptA (10.10.0.0/24) → 10.20.0.50:443, 10.20.0.60:5432: ALLOW</text>
  <text class="text" x="190" y="760">• DeptB (10.20.0.0/24) → 10.0.0.10:445 and DNS/NTP: ALLOW</text>
  <text class="text" x="190" y="780">• Guests (10.30.0.0/24) → WAN only; BLOCK RFC1918</text>
  <text class="note" x="190" y="800">All other inter‑VLAN traffic: DROP (default deny). Apply time‑based rules / rate‑limits as needed.</text>

  <!-- Legend -->
  <text class="note" x="170" y="845">Security &amp; Control: ACLs/Firewall rules, DNS filtering, Web proxy (Squid), time‑based policies, rate limiting.</text>
</svg>
